/**
 * ng-string-to-json 1.0.0 2015-07-06
 * @author: Nitesh Mishra <niteshmishra@niteshmishra.in>
 * @homepage: https://github.com/nitesh354/ngStringToJson
 * @license: GPL-2.0
 */

!function(a){var b=a.module("ngStringToJson",[]);b.directive("ngStringToJson",[function(){return{restrict:"EA",scope:{},require:"ngModel",controller:["$scope",function(b){b.data=void 0,this.setData=function(c){b.data=a.copy(c)}}],link:function(a,b,c,d){a.update=function(a){d.$setViewValue(a)},a.$watch("data",a.update)}}}]),b.directive("nmArray",["$log","nmGetParentCtrl",function(b,c){return{restrict:"EA",scope:{},controller:["$scope",function(b){b.data=[],this.setData=function(c){b.data.push(a.copy(c))}}],link:function(d,e,f,g){var h=c(e,"ngStringToJson"),i=c(e,"nmArray"),j=c(e,"nmObject"),k=c(e,"nmData");d.update=function(c){a.isDefined(h)?h.setData(d.data):a.isDefined(i)?i.setData(d.data):a.isDefined(j)?b.error("Invalid hierarchy :: nm-array couldn't have nm-object as parent."):a.isDefined(k)&&k.setData(d.data)},d.$watchCollection("data",d.update)}}}]),b.directive("nmObject",["$log","nmGetParentCtrl",function(b,c){return{restrict:"EA",scope:{},controller:["$scope",function(b){b.data={},this.setData=function(c,d){b.data[c]=a.copy(d)}}],link:function(d,e,f,g){var h=c(e,"ngStringToJson"),i=c(e,"nmArray"),j=c(e,"nmObject"),k=c(e,"nmData");d.update=function(c){a.isDefined(h)?h.setData(d.data):a.isDefined(i)?i.setData(d.data):a.isDefined(j)?b.error("Invalid hierarchy :: nm-object couldn't have nm-object as parent."):a.isDefined(k)&&k.setData(d.data)},d.$watchCollection("data",d.update)}}}]),b.directive("nmData",["$log","nmGetParentCtrl",function(b,c){return{restrict:"EA",scope:{},controller:["$scope",function(b){b.key=void 0,b.value=void 0,this.setData=function(c){b.value=a.copy(c)}}],link:function(d,e,f,g){var h=c(e,"ngStringToJson"),i=c(e,"nmArray"),j=c(e,"nmObject"),k=c(e,"nmData");d.key=f.key,d.value=d.value||f.value,d.update=function(c){a.isDefined(h)?h.setData(d.value):a.isDefined(i)?i.setData(d.value):a.isDefined(j)?j.setData(d.key,d.value):a.isDefined(k)&&b.error("Invalid hierarchy :: nm-data couldn't have nm-data as parent.")},d.$watch("value",d.update)}}}]),b.factory("nmGetParentCtrl",function(){var b=function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},c=function(c,d){return a.isDefined(c.attr(b(d)))?!0:!1},d=function(a,b){if(a&&b){var d=a.parent()||void 0,e=d&&c(d,b)&&d.controller(b)||void 0;return e}return void 0};return d})}(angular);
